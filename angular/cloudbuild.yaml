apiVersion: deploy.cloud.google.com/v1
kind: DeliveryPipeline
metadata:
  name: angular-delivery-pipeline
  description: main application pipeline
serialPipeline:
  stages:
    - targetId: angular-deployment

---
apiVersion: deploy.cloud.google.com/v1
kind: Target
metadata:
  name: angular-deployment
  description: development cluster
gke:
  cluster: projects/incubation-ids/locations/europe-west1/clusters/demo-cluster-1

---
apiVersion: networking.cloud.google.com/v1beta1
kind: CanaryConfig
metadata:
  name: angular-canary-config
  namespace: default
spec:
  backendService: your-backend-service-name
  defaultService: your-default-service-name
  numBaselineReplicas: 5
  numCanaryReplicas: 2
  baselinePercent: 80
  name: your-canary-config-name
  maxSurge: 20%
  maxUnavailable: 0
  interval: 60s
  timeout: 60s
  healthyThreshold: 3
  unhealthyThreshold: 3
  host: your-host
